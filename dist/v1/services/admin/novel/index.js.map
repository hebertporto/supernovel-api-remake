{"version":3,"sources":["../../../../../src/v1/services/admin/novel/index.js"],"names":["router","Router","post","single","res","next","body","file","then","status","json","payload","catch","error","get","params","query","novelId","currentPage","delete","put"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;AAEA;;AAEA;;;;AAOA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEAD,OAAOE,IAAP,CAAY,GAAZ,EAAiB,eAAOC,MAAP,CAAc,MAAd,CAAjB,EAAwC,2DAAxC,EAAqE,gBAAiBC,GAAjB,EAAsBC,IAAtB,EAA+B;AAAA,MAA5BC,IAA4B,QAA5BA,IAA4B;AAAA,MAAtBC,IAAsB,QAAtBA,IAAsB;;AAClG,qBAAOD,IAAP,EAAaC,IAAb,EACGC,IADH,CACQ;AAAA,WAAWJ,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,OAArB,CAAX;AAAA,GADR,EAEGC,KAFH,CAES;AAAA,WAASP,KAAKQ,KAAL,CAAT;AAAA,GAFT;AAGD,CAJD;;AAMAb,OAAOc,GAAP,CAAW,YAAX,EAAyB,iBAAoBV,GAApB,EAAyBC,IAAzB,EAAkC;AAAA,MAA/BU,MAA+B,SAA/BA,MAA+B;AAAA,MAAvBC,KAAuB,SAAvBA,KAAuB;AAAA,MACjDC,OADiD,GACrCF,MADqC,CACjDE,OADiD;AAAA,MAEjDC,WAFiD,GAEjCF,KAFiC,CAEjDE,WAFiD;;AAGzD,gCAAkBD,OAAlB,EAA2BC,WAA3B,EACGV,IADH,CACQ;AAAA,WAAWJ,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,OAArB,CAAX;AAAA,GADR,EAEGC,KAFH,CAES;AAAA,WAASP,KAAKQ,KAAL,CAAT;AAAA,GAFT;AAGD,CAND;;AAQAb,OAAOmB,MAAP,CAAc,WAAd,EAA2B,iBAAaf,GAAb,EAAkBC,IAAlB,EAA2B;AAAA,MAAxBU,MAAwB,SAAxBA,MAAwB;AAAA,MAC5CE,OAD4C,GAChCF,MADgC,CAC5CE,OAD4C;;AAEpD,qBAAOA,OAAP,EACGT,IADH,CACQ;AAAA,WAAWJ,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,OAArB,CAAX;AAAA,GADR,EAEGC,KAFH,CAES;AAAA,WAASP,KAAKQ,KAAL,CAAT;AAAA,GAFT;AAGD,CALD;;AAOAb,OAAOoB,GAAP,CAAW,WAAX,EAAwB,eAAOjB,MAAP,CAAc,MAAd,CAAxB,EAA+C,iBAAyBC,GAAzB,EAA8BC,IAA9B,EAAuC;AAAA,MAApCC,IAAoC,SAApCA,IAAoC;AAAA,MAA9BS,MAA8B,SAA9BA,MAA8B;AAAA,MAAtBR,IAAsB,SAAtBA,IAAsB;AAAA,MAC5EU,OAD4E,GAChEF,MADgE,CAC5EE,OAD4E;;;AAGpF,qBAAOX,IAAP,EAAaW,OAAb,EAAsBV,IAAtB,EACGC,IADH,CACQ;AAAA,WAAWJ,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,OAArB,CAAX;AAAA,GADR,EAEGC,KAFH,CAES;AAAA,WAASP,KAAKQ,KAAL,CAAT;AAAA,GAFT;AAGD,CAND;;kBAQeb,M","file":"index.js","sourcesContent":["import express from 'express'\nimport validate from 'express-validation'\nimport { upload } from './../../../utils/upload'\n\nimport { createNovelSchema } from './schema'\n\nimport {\n  create,\n  findByIdOrFindAll,\n  remove,\n  update,\n} from './../../../models/novel'\n\nconst router = express.Router()\n\nrouter.post('/', upload.single('file'), validate(createNovelSchema), ({ body, file }, res, next) => {\n  create(body, file)\n    .then(payload => res.status(201).json(payload))\n    .catch(error => next(error))\n})\n\nrouter.get('/:novelId?', ({ params, query }, res, next) => {\n  const { novelId } = params\n  const { currentPage } = query\n  findByIdOrFindAll(novelId, currentPage)\n    .then(payload => res.status(200).json(payload))\n    .catch(error => next(error))\n})\n\nrouter.delete('/:novelId', ({ params }, res, next) => {\n  const { novelId } = params\n  remove(novelId)\n    .then(payload => res.status(200).json(payload))\n    .catch(error => next(error))\n})\n\nrouter.put('/:novelId', upload.single('file'), ({ body, params, file }, res, next) => {\n  const { novelId } = params\n\n  update(body, novelId, file)\n    .then(payload => res.status(200).json(payload))\n    .catch(error => next(error))\n})\n\nexport default router\n"]}